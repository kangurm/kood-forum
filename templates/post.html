<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel='stylesheet' href='/static/styles/style.css'>
        <title>Post Detail</title>
    </head>
    <body>
        <header>
            <nav class="fixedContainer">
                <div class="start">
                    <div class="menuIcon">
                        <div class="menuIconBars"></div>
                        <div class="menuIconBars"></div>
                        <div class="menuIconBars"></div>
                    </div>
                    <a id="homeArticle" href="/">Home</a>
                </div>
                <div class="middle">
                    <input class="searchBar" type="search"
                        placeholder="Search...">
                </div>
                <div class="end">
                    {{if .LoggedUser.IsLoggedIn}}
                    <h3 id="user-info">Welcome, <h4 id="user-info" class="inline" style="padding-left: 4px; color: azure;">{{.LoggedUser.Username}}</h4></h3>
                    <span class="padding"></span>
                    <a href="/create-a-post">New Post</a>
                    <span class="padding"></span>
                    <a href="/logout">Logout</a>
                    {{else}}
                    <a href="/login">Login</a>
                    {{end}}
                </div>
            </nav>
        </header>
        <div class="postContainer">
            <div class="postHeader">
                <h1 class="postTitle">{{.Posts.Title}}</h1>
            </div>
            <div class="postBody">{{.Posts.Text}}</div>
            <div class="postActions">
                <a href="/post/react?post_id={{.Posts.Post_id}}&action=like"
                    class="likeButton">üëç Like ({{.Posts.LikeCount}})</a>
                <a href="/post/react?post_id={{.Posts.Post_id}}&action=dislike"
                    class="dislikeButton">üëé Dislike
                    ({{.Posts.DislikeCount}})</a>
            </div>
            <div class="commentSection">
                <h3>Comments</h3>
                {{if .LoggedUser.IsLoggedIn}}
                <form method="POST" action="/post/comment?post_id={{.Posts.Post_id}}">
                    <textarea type="text" name="comment" class="commentInputBox"
                        placeholder="Write a comment..."></textarea>
                    <button type="submit" class="commentSubmit">Submit</button>
                </form>
                {{else}}
                <p class="login-comment-message">You must log in to comment</p>
                {{end}}
                <div class="comments">
                    {{range .Comments}}
                    <div class="comment">
                        <span class="commentUsername">{{.Username}}</span>
                        <p class="commentText">{{.Text}}</p>
                        <span class="commentDate">Created: {{.Created}}</span>
                        <div class="commentActions">
                            <a href="/post/react?comment_id={{.Comment_id}}&post_id={{.Post_id}}&action=like" class="commentLikeButton">üëç Like ({{.LikeCount}})</a>
                            <a href="/post/react?comment_id={{.Comment_id}}&post_id={{.Post_id}}&action=dislike" class="commentDislikeButton">üëé Dislike ({{.DislikeCount}})</a>
                            </div>
                    </div>
                    {{end}}
             </div>
        </div>
    </body>
</html>
